<!DOCTYPE html>
<html>
<head>
<title>Alex Taravilla (M04UF1)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

<link rel="stylesheet" href="base.css" />
<link rel="stylesheet" href="game.css" />

<script>
let game_data;
let current_room = 0;
let items_picked = [];


function terminal_out (info){
let terminal = document.getElementById("terminal");
terminal.innerHTML += info;
terminal.scrollTop = terminal.scrollHeight;
}

function paraseComand(comand){
console.log("El comando", comand);
switch (comand){
	case "ver":
		terminal_out("<p>"+game_data.rooms[current_room].description+"</p>");
	break;
	
	case "ir":
	terminal_out("<p> Puedes ir a :"+game_data.rooms[current_room].doors+"</p>");
	/*let doors = "";
	let doors_num = game_data.rooms[current_room].doors.length;
	for(let i = 0; i < doors_num;i++){
	 doors += game_data.rooms[current_room].doors[i]+", ";
	}
	terminal_out("<p>Pudes ir a:"+doors+"</p>");
	*/
	break;
	
	default:
		terminal_out("<p>"+comand+" Comando no encontrado</p>");
	break;
 }
}
	

function paraseInstruction(instruction){
console.log("La instrucion", instruction);

}

function readAction(){
let instruction = document.getElementById("comand").value;
let instruction_trim = instruction.trim();
let data = instruction_trim.split(" ");

if (data.length == 0 || instruction_trim == ""){
document.getElementById("terminal").innerHTML += "<p><strong>Error</strong>: escribe una instrucion</p>";
return;
}
if(data.length == 1){
paraseComand(data[0]);
}
else {
paraseInstruction(data);
}
}

function game (data){
game_data = data;

document.getElementById("terminal").innerHTML = "<p><strong>¡Bienvenidos a DarkIkea!</strong> El juego de terror definitivo</p>";
document.getElementById("terminal").innerHTML +="<p>Te encuentras en "+game_data.rooms[current_room].name+". ¿que quieres hacer?</P>";
}
fetch("https://lax27.github.io/game.json").then(response => response.json()).then(data => game(data));
</script>

</head>
<body>
<header>
<h1>Alex Taravilla (M04UF1)</h1>
<nav>
<ul id="main-menu">
<li id="menu-presentation"><a href="index.html">Presentación</a></li>
<li id="menu-hobbies"><a href="hobbies.html">Hobbies</a></li>
<li id="menu-contact"><a href="contact.html">Contacto</a></li>
<li id="menu-CV"><a href="CV.html">CV</a></li>
<li id="menu-game"><a href="game.html">Game</a></li>
</ul>
</nav>
</header>
<main>
<article>
<h2>Juegaco</h2>
<form>
	<div id="terminal">
	</div>
	<input type="text" id="comand"/>
	<input type="submit" onclick="readAction(); return false;" value="Acción"/>
</form>
</article>
<aside>
<h2>Lateral</h2>
<p>Ejemplo de lateral</p>
</aside>

</main>

<footer>
<p>Alex Taravilla (c) <span id="footer-year">2022</span></p>
<script>
document.getElementById("footer-year").innerHTML = new Date().getFullYear();
</script>
</footer>
</body>
</html>
